<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chief GPT</title>

  <link rel="stylesheet" href="responsive.css">
 
  <link rel="stylesheet" href="Avenir.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <style>
  
   
  </style>
</head>
<body>
  <header>
    
    <div class="logo">
  <span class="super">Super</span>
  <span class="chief">Chief</span>
</div>

    <nav>
      <ul class="centered-nav">
        <li class="a"><a href="#">About</a></li>
        <li class="a"><a href="#">Use Cases</a></li>
        <li class="a"><a href="#">News</a></li>
        
      </ul>
    </nav>
    <div class="subscribe-button">
        <a href="#">Login</a>
        <a href="#">Subscribe</a>
    </div>
  </header>

  <main>
  
    <section class="hero">
      <div class="content-box">
        <h1>How can I help you today?</h1>
        <p>I'm a highly trained AI Chief Engineer that<br> can solve problems, create documents, and <br> analyze real-world scenarios.</p>
        <div class="btn-container">
        <button class="btn">Create a safety drill for power failure</button>
        <button class="btn">Draft an incident report for the following </button><br>
        <button class="btn">Write an onboarding checklist for the new</button>
        <button class="btn">Teach me how to clean a fuel oil purifer</button>
      </div>  
     
    
      
     <div id="chatbot-responses" class="chatbot-responses"></div>
      
 
      
    
   
       
        
        
        <form id="message-form" action="#">
          <div class="input-field">
            <label for="file" class="upload-button">
              <i class="fa fa-file"></i>
              <input id="file" type="file" hidden>
            </label>
            <input id="message-input" type="text" placeholder="Message ChiefGPT">
            <label for="send-button" class="send-button">
              <button id="send-button" type="submit" hidden class="send-button"></button>
              <i class="fa fa-arrow-circle-up"></i>
            </label>
          </div>
          <p class="p">ChiefGPT can make mistakes. Consider checking important information.</p>
        </form>
        
        
      </div>
    </section>

   
  </script>
    <section class="services">
      <h2></h2>
      <ul>
        <li>Training</li>
        <li>Safety</li>
        <li>Compliance</li>
        <li>Efficiency</li>
        <li>Profitability</li>
      </ul>
    </section>
  </main>
  <footer>
    <p>Disclaimer</p>
    <p>Terms of Use</p>
  </footer>
</body>

<script>
  

async function query(message) {
    const response = await fetch(
        
        "http://localhost:3000/api/v1/prediction/9277bc0b-cb27-4f8e-b806-2bbf871f497c",
        {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({ question: message })
        }
    );
    const result = await response.json();
    return result;
}
// async function query(data) {
//     const response = await fetch(
//         "https://flowise-o4x8.onrender.com/api/v1/prediction/0d22d758-b696-4e7f-bdf8-6e261f51f1b3",
//         {
//             headers: {
//                 Authorization: "Bearer GY3DeAnbBtrCYx9bOf8ijfDQES5kkCD8O5eyCpEoGAs=",
//                 "Content-Type": "application/json"
//             },
//             method: "POST",
//             body: JSON.stringify(data)
//         }
//     );
//     const result = await response.json();
//     return result;
// }



async function sendMessage(message) {
    // Display user's input with user icon
    const chatbotResponses = document.getElementById('chatbot-responses');
    chatbotResponses.innerHTML += `
        <div class="user-message">
            <img class="icon" src="user-icon.png" alt="User Icon">
            <p>${message}</p>
        </div>
    `;

    // Send message to chatbot
    const response = await query(message);
    
    // Display chatbot response with chatbot icon
    if (response.hasOwnProperty('text')) {
        const responseText = response.text;
        chatbotResponses.innerHTML += `
            <div class="chatbot-message">
                <img class="icon" src="chatbot-icon.png" alt="Chatbot Icon">
                <p>${responseText}</p>
            </div>
        `;
    } else {
        chatbotResponses.innerHTML += `<p>Unexpected response format</p>`;
    }
}


function formatMessage(message) {
        let formattedMessage = '';
        let lines = message.split('\n');
        let inHeading = false;

        lines.forEach(line => {
            if (line.trim().startsWith('**') && line.trim().endsWith('**')) {
                // If the line starts and ends with '**', it's a heading
                if (inHeading) {
                    // Close previous heading
                    formattedMessage += '</p>';
                }
                // Open new heading and bold the text
                formattedMessage += `<h3>${line.substring(2, line.length - 2)}</h3><p>`;
                inHeading = true;
            } else if (line.trim().startsWith('*') || line.trim().startsWith('-')) {
                // If the line starts with '*' or '-', it's a bulleted list item
                if (inHeading) {
                    // Close the heading and start a new line for the list
                    formattedMessage += '</p>';
                    inHeading = false;
                }
                formattedMessage += `<ul><li>${line.substring(1).trim()}</li></ul>`;
            } else if (!isNaN(line.trim())) {
                // If the line is a number, it's a numbered list item
                if (inHeading) {
                    // Close the heading and start a new line for the list
                    formattedMessage += '</p>';
                    inHeading = false;
                }
                formattedMessage += `<ol><li>${line.trim()}</li></ol>`;
            } else {
                // For regular text, use paragraph tag with class for styling
                if (inHeading) {
                    // Close the heading and start a new line for the content
                    formattedMessage += '</p><p>';
                    inHeading = false;
                }
                formattedMessage += `<p>${line}</p>`;
            }
        });

        // Close the last heading if one exists
        if (inHeading) {
            formattedMessage += '</p>';
        }

        return formattedMessage;
    }





document.addEventListener('DOMContentLoaded', () => {
    const messageForm = document.getElementById('message-form');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');

    // Add event listener for form submission
    messageForm.addEventListener('submit', async (event) => {
        event.preventDefault(); // Prevent form submission

        const message = messageInput.value.trim();
        if (message !== '') {
            // Add spinning class to the send button
            sendButton.classList.add('spinning');

            // Send message to chatbot and display response
            await sendMessage(message);

            // Clear input field
            messageInput.value = '';

            // Remove spinning class from the send button
            sendButton.classList.remove('spinning');
        }
    });
});





document.addEventListener('DOMContentLoaded', () => {
    const messageInput = document.getElementById('message-input');

    // Get all buttons in the btn-container
    const buttons = document.querySelectorAll('.btn-container .btn');
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            // Get the text content of the clicked button
            const message = button.textContent.trim();
            
            // Set the input field value to the message
            messageInput.value = message;

            // Trigger form submission
            messageInput.form.dispatchEvent(new Event('submit'));
        });
    });
});




</script>



</html>
